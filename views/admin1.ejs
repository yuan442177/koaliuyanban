<% include inc/header %>
    <!-- 真分页 -->
    <style>
        ul li {
            /* width: 100px; */
        }

        .admin1Nav {
            width: 100%;
            height: auto;
            float: right;
        }

        .admin1Nav ul {
            width: 100%;
            height: 100%;
        }

        .admin1Nav ul li {
            width: auto;
            height: auto;
            margin: 10px 25px;
            float: right;
        }

        #footer {
            position: absolute;
            /* margin: 0 auto; */
            /* margin-top: -10px; */
            width: 500px;
            height: 30px;
            background: url(images/footer-bg.png) bottom center no-repeat;
            text-align: center;
            font-family: "Times New Roman", Times, Georgia;
            font-weight: normal;
            font-size: 16px;
            color: #8d8d8d;
            bottom: 20px;
            left: 50%;
            margin-left: -250px;
        }
    </style>
    <section>
        <div>
            <%  if(!session.user){ %>
                <h1>
                    非法请求!
                </h1>
                <% } %>
                    <% if(session.user){ %>
                        <div class="admin1Nav">
                            <ul>
                                <!-- <li>
                                    <a onclick="getDataZgmxqj()" style="cursor: pointer">获取zgmxqj留言板数据</a>
                                </li> -->
                                <!-- <li style="float: left;">
                                    <input type="text" class="demo-input" placeholder="请选择日期" id="startDate" style="display: inline">到
                                    <input type="text" class="demo-input" placeholder="请选择日期" id="endDate" style="display: inline">
                                    <button type="button" onclick="setDateGetdata(1)">确定</button>
                                </li> -->

                            </ul>
                        </div>
                        <div>
                            <!-- <input type="text" class="demo-input" placeholder="请选择日期" id="startDate">到
                                <input type="text" class="demo-input" placeholder="请选择日期" id="endDate">
                                <button onclick="getDate()">确定</button> -->
                            <div id="Article" class="table-container"></div>
                            <div id="pagination_12" style="text-align: center;"></div>
                        </div>
                        <% } %>
        </div>
    </section>
    <!-- <script>
            let date1 = ""
    let date2 = ""
            //获取时间查询数据
    function getDate() {
        time1 = date1 + ' 00:00'
        time2 = date2 + ' 23:59'
        console.log(CompareDate(time2, time1))
        if (CompareDate(time2, time1)) {
            var data = {
                time1: time1,
                time2: time2,
                pageSize: pageSize,
                pageIndex: setDatePageIndex
            }
            $.ajax({
                type: "POST",
                url: "http://127.0.0.1:3000/admin1/selectByDate",
                data: data,
                async: false,
                success: function (data) {
                    console.log(data)
                    count = data[0][0].msg
                    //<thead> <tr> <th>ID</th><th>姓名</th> <th>号码</th> <th>时间</th> <th>地址</th> <th>IP</th> <th>来源</th> <th>状态/操作</th> </tr> </thead>
                    var str_thead = "<table id='allMsg' class='table'><thead> <tr> <th>ID</th><th>姓名</th> <th>号码</th> <th>时间</th> <th>地址</th> <th>IP</th> <th>来源</th> <th>状态/操作</th> </tr> </thead><tbody>";
                    var str_tbody = ""
                    var update = '未审核'
                    var remove = '删除'
                    var E_delect = '"确定删除吗"'
                    for (var i = 0; i < data.length; i++) {
                        str_tbody += "<tr><td>" + data[i].id + "</td>" +
                            "<td>" + data[i].name + "</td><td>" + data[i].tel + "</td>" +
                            "<td>" + data[i].time + "</td><td>" + data[i].ads + "</td>" +
                            "<td>" + data[i].ip + "</td><td>" + data[i].url + "</td>" +
                            "<td class='tdC'><input type='button' id=" + data[i].id + " class='upsta btn btn-default' value='" + data[i].sta + "'>" +
                            "<input type='button' id=" + data[i].id + " class='delete btn btn-default' value='" + remove + "'>" +
                            "</td></tr>"
    
                    }
                    var str_table = str_thead + str_tbody
                    document.getElementById('Article').innerHTML = null
                    document.getElementById('Article').innerHTML = str_table
                    var a = document.getElementsByClassName("upsta")
                    for (let i = 0; i < a.length; i++) {
                        if (a[i].value == '未审核') {
                            a[i].className = 'upsta btn btn-danger'
                        } else {
                            a[i].className = 'upsta btn btn-success'
                        }
                    }
                    console.log('已获取到最新留言数据')
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    // 状态码
                    console.log(XMLHttpRequest.status);
                    // 状态
                    console.log(XMLHttpRequest.readyState);
                    // 错误信息   
                    console.log(textStatus);
                }
            });
        } else {
            alert('时间选择错误!请核对!')
        }

    }
    function CompareDate(d1, d2) {
        return ((new Date(d1.replace(/-/g, "\/"))) > (new Date(d2.replace(/-/g, "\/"))));
    }

    lay('#version').html('-v' + laydate.v);
    //执行一个laydate实例
    laydate.render({
        elem: '#startDate', //指定元素
        done: function (value, date, endDate) {
            //alert(value); //得到日期生成的值，如：2017-08-18
            date1 = value

        }
    });
    laydate.render({
        elem: '#endDate', //指定元素
        done: function (value, date, endDate) {
            //alert(value); //得到日期生成的值，如：2017-08-18
            date2 = value
        }
    });
    </script> -->

    <% include inc/footer %>