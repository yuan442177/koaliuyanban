<% include inc/header %>
<link rel='stylesheet' href='/stylesheets/login.css' />
<div id="container">
    <form class="form create" method="post ">
        <div class="login">LOGIN</div>
        <div class="username-text">Username:</div>
        <div class="password-text">Password:</div>
        <div class="username-field">
            <input placeholder="用户名" type="text" name="name" />
        </div>
        <div class="password-field">
            <input placeholder="密码" type="password" name="password" />
        </div>
        <input type="button" class="submits" name="submit" value="GO" />
    </form>
</div>
    <!-- <div class="container">
            <form class="form create" method="post ">
                <div>
                    <label>用户名：</label>
                    <input placeholder="用户名" type="text" name="name">
                </div>
                <div>
                    <label>密码：</label>
                    <input placeholder="密码" type="password" name="password">
                </div>
                <div class="submit">登录</div>
            </form>
        </div> -->
    <script>
        $('.submits').click(() => {
            console.log($('.form').serialize())
            $.ajax({
                url: "/users/login",
                data: $('.form').serialize(),
                type: "POST",
                cache: false,
                dataType: 'json',
                success: function (msg) {
                    if (!msg) {
                        //$('.error').text('用户名或密码错误')
                        alert('用户名或密码错误')
                        $('input').val('')
                        console.log(ctx.body);
                        //fade('.error')
                    }
                    else {
                        //$('.success').text('登录成功')
                        //fade('.success')
                        // alert('登录成功')
                        setTimeout(() => {
                            window.location.href = "/"
                        }, 1000)
                    }
                    //console.log($('.ui.error.message').text);
                },
                error: function () {
                    alert('异常');
                }
            })

        })

    </script>
    <% include inc/footer %>